<!DOCTYPE html>
<html manifest="cache.manifest">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" >
        <meta name="apple-mobile-web-app-capable" content="yes" >
        <meta name="apple-mobile-web-app-status-bar-style" content="black" >
        <meta name="format-detection" content="telephone=no" >
        <title>Aftenposten integration</title>
        <link rel="stylesheet" type="text/css" href="vendor/aptoma/alf/alf.css">
        <link rel="stylesheet" type="text/css" href="vendor/agens/page-transitions.css">
        <link rel="stylesheet" type="text/css" href="vendor/agens/branding.css">
        <link rel="stylesheet" type="text/css" href="ads/css/ads.css">
        <link rel="apple-touch-icon-precomposed" href="gfx/appicon.png"/>
        <script type="text/javascript">
            // Hack: Make web view too wide, to trigger Androidâ€™s scaling (maintain 4:3 aspect ratio)
            (function()
            {
                var params = {};
                var search = window.location.search;

                // https://github.com/sindresorhus/query-string
                if(typeof search === 'string')
                {
                    search = search.trim().replace(/^\?/, '');

                    if(search)
                    {
                        params = search.trim().split('&').reduce(function(result, param)
                        {
                            var parts = param.replace(/\+/g, ' ').split('=');
                            // missing `=` should be `null`:
                            // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters
                            result[parts[0]] = parts[1] === undefined ? null : decodeURIComponent(parts[1]);
                            return result;
                        }, {});
                    }
                }

                var windowWidth = window.innerWidth;
                var windowHeight = window.innerHeight;
                var tooHigh = 768 - windowHeight;
                var tooWide = parseInt((tooHigh / 3) * 4, 10);
                tooWide += tooWide % 2;

                document.body.style.width = windowWidth + tooWide + 'px';
                document.getElementsByTagName('html')[0].style.width = windowWidth + tooWide + 'px';
            })();
        </script>
    </head>
    <body>
        <div id="chrome" class="chrome">
            <div class="mask">
               <div id="alf-layer-content" class="alf-layer alf-layer-content article"></div>
            </div>
            <div id="alf-layer-fullscreen" class="alf-layer alf-layer-fullscreen alf-is-hidden"></div>
        </div>

        <iframe width="0" height="0" frameborder="0" class="event-frame"></iframe>
        <iframe width="0" height="0" frameborder="0" class="event-frame"></iframe>
        <iframe width="0" height="0" frameborder="0" class="event-frame"></iframe>
        <iframe width="0" height="0" frameborder="0" class="event-frame"></iframe>

        <script type="text/javascript" src="vendor/aptoma/alf/alf.min.js"></script>
        <script type="text/javascript" src="js/widget/disqus.js"></script>
        <script type="text/javascript" src="js/widget/banner.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="js/hammer.js"></script>
        <script type="text/javascript" src="js/page-transitions.js"></script>
        <script type="text/javascript" src="js/ivy.js"></script>
        <script type="text/javascript" src="js/handlebars-v1.3.0.js"></script>
        <script type="text/javascript" src="js/pusher.min.js"></script>
        <script id="live-template" type="text/x-handlebars-template">
            <div class="ivy-live">
                <h1>{{title}}</h1>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Time</th>
                            <th>Title</th>
                            <th>Message</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each posts}}
                        <tr>
                            <td><img src="{{icon}}" alt="" /></td>
                            <td>{{time}}</td>
                            <td>{{title}}</td>
                            <td>{{content}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </script>
        <script id="live-template-post" type="text/x-handlebars-template">
            <tr>
                <td><img src="{{icon}}" alt="" /></td>
                <td>{{time}}</td>
                <td>{{title}}</td>
                <td>{{content}}</td>
            </tr>
        </script>
        <script type="text/javascript">
            require(['main'], function(app) {
                'use strict';
                //runs main(app) just by referencing it
            });
        </script>
    </body>
</html>
